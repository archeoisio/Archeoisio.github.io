<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>Mappa Leaflet FLAG</title>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

<!-- LocateControl CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.76.0/dist/L.Control.Locate.min.css" />

<!-- Routing Machine CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />

<!-- Geocoder CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />

<style>
  html, body { margin:0; padding:0; height:100%; overflow:hidden; }
  #map { width:100%; height:100%; position:fixed; top:0; left:0; }

  /* Info Panel */
  #info-panel {
    display:none;
    position:absolute;
    bottom:40px;
    left:15px;
    width:150px;
    min-height:80px;
    background:rgba(0,0,0,0.5);
    color:white;
    padding:10px;
    border-radius:8px;
    font-family:sans-serif;
    font-size:12px;
    z-index:1000;
  }

  /* Box routing */
  #route-box {
    display:none;
    position:absolute;
    bottom:60px;
    right:20px;
    background:white;
    padding:10px;
    border-radius:8px;
    box-shadow:0 0 5px rgba(0,0,0,0.2);
    flex-direction:column;
    gap:6px;
    z-index:1000;
  }

  #route-box input { padding:5px; font-size:12px; }
  #route-box button { padding:6px; font-size:12px; cursor:pointer; }

  /* Toggle button */
  #route-toggle {
    position:absolute;
    bottom:150px;
    right:20px;
    z-index:1000;
  }
  #toggle-btn {
    width:44px; height:44px;
    display:flex; justify-content:center; align-items:center;
    font-size:25px; background:white; border-radius:4px; border:none;
    cursor:pointer;
  }

  /* Home + Locate + Indicator Box */
  .custom-home-box {
    position:absolute;
    top:10px; right:10px;
    display:flex; flex-direction:column; gap:6px;
    z-index:1000;
  }
  .custom-home-button, .leaflet-control-locate a {
    width:44px; height:44px;
    display:flex; justify-content:center; align-items:center;
    font-size:25px; background:white; border-radius:4px; border:none;
    cursor:pointer;
  }

  /* Capital Popup */
  .capital-popup .capital-box {
    font-size:14px; padding:4px 8px;
    background:white; border-radius:4px; box-shadow:0 2px 6px rgba(0,0,0,0.3);
  }
</style>

</head>
<body>

<div id="map"></div>

<!-- Info panel -->
<div id="info-panel"><div id="info-content"></div></div>

<!-- Toggle routing box -->
<div id="route-toggle">
  <button id="toggle-btn">‚û°Ô∏è</button>
</div>

<!-- Routing box -->
<div id="route-box">
  <input type="text" id="start" placeholder="Partenza" />
  <input type="text" id="end" placeholder="Arrivo" />
  <button id="route-btn">Calcola</button>
  <button id="clear-btn">Reset</button>
</div>

<!-- Pulsanti Home + Locate + Indicator -->
<div class="custom-home-box">
  <button class="custom-home-button" id="home-btn">üè†</button>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Routing Machine JS -->
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>

<!-- LocateControl JS -->
<script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.76.0/dist/L.Control.Locate.min.js"></script>

<!-- LabelTextCollision plugin -->
<script src="https://unpkg.com/leaflet-labeltextcollision"></script>

<!-- Geocoder JS -->
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

<!-- Script principale -->
<script src="map-flag.js"></script>

</body>
</html>
